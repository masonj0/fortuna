# üê¥ Fortuna Faucet - Developer's Guide

This guide provides technical instructions for developers. For end-user installation, please refer to the MSI installers generated by the project's GitHub Actions workflows.

---

## üèõÔ∏è Core Architecture

This repository contains the source code for the Fortuna Faucet application, which has two primary deployment targets:

1.  **Standalone Web Service (MSI Installer):**
    *   A Python backend powered by FastAPI, compiled into a self-contained executable using PyInstaller.
    *   A static Next.js frontend, which is bundled with the backend.
    *   The entire application is packaged into an MSI installer using the WiX Toolset, which installs the backend as a background Windows Service.

2.  **Electron Desktop Application (MSI Installer):**
    *   The same Python backend, compiled as an executable.
    *   An Electron application that acts as a wrapper, launching the backend executable and displaying the frontend.

The `python_service` and `web_service/backend` directories contain functionally equivalent but historically separate versions of the backend code. The modern workflows primarily use `web_service/backend`.

---

## üèóÔ∏è Building the Application (The Right Way)

**This project is built and packaged entirely through GitHub Actions.** The CI/CD pipelines are the single source of truth for creating production-ready installers. Manual builds are not recommended or supported due to the complexity of the environment.

The primary, production-ready build workflows are:

*   **`build-msi-hattrickfusion-ultimate.yml`**: Builds the standalone Web Service MSI. This is the most feature-rich and stable build pipeline.
*   **`build-electron-msi-gpt5.yml`**: Builds the Electron-based desktop application MSI.

These workflows handle all necessary steps, including:
*   Installing the correct versions of Python, Node.js, and the WiX Toolset.
*   Managing architecture-specific dependencies (e.g., `pandas` for x86 builds).
*   Compiling the Python backend with PyInstaller.
*   Building the static Next.js frontend.
*   Packaging the final MSI installer.
*   Running automated smoke tests to verify the installation.

To get a build, simply push a commit to the `main` branch and retrieve the MSI artifact from the completed workflow run on the [Actions tab](https://github.com/masonj0/fortuna/actions) of the repository.

---

## üî¨ Local Development Environment

While production builds are handled by CI/CD, you can run the services locally for development and testing.

### Backend (`web_service/backend/`)

1.  Navigate to the backend directory:
    ```bash
    cd web_service/backend
    ```
2.  Create and activate a Python virtual environment:
    ```bash
    python -m venv .venv
    .venv\Scripts\activate
    ```
3.  Install development dependencies:
    ```bash
    pip install -r requirements-dev.txt
    ```
4.  Run the development server:
    ```bash
    python main.py
    ```
    The API will be available at `http://localhost:8102` by default.

### Frontend (`web_platform/frontend/`)

1.  Navigate to the frontend directory:
    ```bash
    cd web_platform/frontend
    ```
2.  Install dependencies:
    ```bash
    npm install
    ```
3.  Run the development server:
    ```bash
    npm run dev
    ```
    The frontend will be available at `http://localhost:3000`.

---
## üì¶ Key Tooling & Scripts

*   **`ARCHIVE_PROJECT.py`**: A utility script that scans the repository and generates the `FORTUNA_ALL_PART*.JSON` archive files. These archives are used as a ground truth for AI-driven code reviews and analysis.
*   **`AGENTS.md`**: Contains critical operational protocols for the AI agents working on this repository.
